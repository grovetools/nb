{
  "sections": {
    "command-reference": {
      "title": "Command Reference",
      "content": "This document provides a reference for all `nb` command-line interface commands, organized by function.\n\n---\n\n### `nb new`\n\nCreates a new note and opens it in the default editor.\n\n**Usage**\n\n\n**Description**\n\nThis command creates a new note file with standardized frontmatter. The filename is generated based on the current date and the provided title. By default, it opens the new note in the editor defined by the `$EDITOR` environment variable. Content can also be piped directly into the note via stdin.\n\n**Arguments \u0026 Flags**\n\n| Flag        | Shorthand | Description                                                                                                                                                             | Default   |\n| ----------- | --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- |\n| `[title]`   | (Arg)     | An optional title for the note. If omitted, a title will be generated from the timestamp.                                                                               | (none)    |\n| `--type`    | `-t`      | The type of note to create. Supports nested types like `issues/bugs`. Common types: `current`, `llm`, `learn`, `daily`, `issues`, `architecture`, `todos`, `blog`, `prompts`. | `current` |\n| `--name`    | `-n`      | An alternative way to specify the note's title.                                                                                                                         | (none)    |\n| `--no-edit` |           | Prevents the command from opening an editor after the note is created.                                                                                                  | `false`   |\n| `--global`  | `-g`      | Creates the note in the global workspace, making it independent of any project or repository.                                                                           | `false`   |\n| `--stdin`   |           | Reads the note's content from standard input. This is auto-detected when content is piped.                                                                              | `false`   |\n\n**Examples**\n\n\n---\n\n### `nb quick`\n\nCreates a quick, one-line note without opening an editor.\n\n**Usage**\n\n\n**Description**\n\nThis command is a shortcut for creating a note of type `quick`. It takes the note's content as a single argument, generates a timestamped title, and saves the file without opening an editor. It is for capturing thoughts or reminders from the command line.\n\n**Arguments \u0026 Flags**\n\n| Flag        | Shorthand | Description                                 | Default |\n| ----------- | --------- | ------------------------------------------- | ------- |\n| `[content]` | (Arg)     | The content of the quick note (required).   | (none)  |\n\n**Examples**\n\n\n---\n\n### `nb list`\n\nLists notes, defaulting to the current workspace context.\n\n**Usage**\n\n\n**Aliases**: `ls`\n\n**Description**\n\nDisplays a table of notes. By default, it shows notes of type `current` in the active workspace and branch. Various flags allow you to expand the scope to other note types, branches, and workspaces.\n\n**Arguments \u0026 Flags**\n\n| Flag             | Shorthand | Description                                                               | Default   |\n| ---------------- | --------- | ------------------------------------------------------------------------- | --------- |\n| `[type]`         | (Arg)     | An optional note type to filter the list by (e.g., `llm`, `issues`).      | `current` |\n| `--all`          |           | List notes of all types within the current context.                       | `false`   |\n| `--type`         | `-t`      | An alternative way to specify the note type to filter by.                 | `current` |\n| `--global`       | `-g`      | List notes from the global workspace only.                                | `false`   |\n| `--workspaces`   | `-w`      | List notes from all registered workspaces.                                | `false`   |\n| `--all-branches` |           | List all notes from all branches within the current Git repository.       | `false`   |\n| `--json`         |           | Output the list of notes in JSON format.                                  | `false`   |\n\n**Examples**\n\n\n---\n\n### `nb search`\n\nPerforms a full-text search across notes.\n\n**Usage**\n\n\n**Description**\n\nSearches the content and titles of notes using SQLite's FTS5 extension for full-text queries. The search is scoped to the current workspace by default.\n\n**Arguments \u0026 Flags**\n\n| Flag      | Shorthand | Description                                      | Default |\n| --------- | --------- | ------------------------------------------------ | ------- |\n| `\u003cquery\u003e` | (Arg)     | The search query (required).                     | (none)  |\n| `--all`   |           | Search across all registered workspaces.         | `false` |\n| `--type`  | `-t`      | Filter search results by a specific note type.   | (none)  |\n| `--limit` |           | The maximum number of search results to return.  | `50`    |\n\n**Examples**\n\n\n---\n\n### `nb manage`\n\nLaunches a terminal user interface (TUI) to browse and manage notes.\n\n**Usage**\n\n\n**Description**\n\nThis command starts a full-screen TUI for interacting with notes. It allows for navigation, filtering, selection, and bulk operations like archiving.\n\n**Arguments \u0026 Flags**\n\n| Flag     | Shorthand | Description                                                | Default |\n| -------- | --------- | ---------------------------------------------------------- | ------- |\n| `--type` | `-t`      | Start the TUI with an initial filter for a specific type.  | (none)  |\n\n**Example**\n\n\n---\n\n### `nb archive`\n\nMoves one or more notes to the archive directory.\n\n**Usage**\n\n\n**Description**\n\nMoves specified notes into a structured archive directory within the current workspace context. It can also archive notes based on their age.\n\n**Arguments \u0026 Flags**\n\n| Flag           | Shorthand | Description                                                               | Default |\n| -------------- | --------- | ------------------------------------------------------------------------- | ------- |\n| `[files...]`   | (Arg)     | A space-separated list of note filenames to archive.                      | (none)  |\n| `--older-than` |           | Archive all notes older than the specified number of days.                | `0`     |\n| `--dry-run`    |           | Show which notes would be archived without actually moving them.          | `false` |\n| `--force`      |           | Archive notes without a confirmation prompt.                              | `false` |\n\n**Examples**\n\n\n---\n\n### `nb move`\n\nMoves or copies notes between different types, branches, or workspaces.\n\n**Usage**\n\n\n**Description**\n\nReorganizes notes by moving or copying them. The source is a file path, and the destination can be a note type (like `learn`), a full directory path, or a combination of workspace, branch, and type flags. By default, it also applies the `migrate` logic to standardize the note in its new location.\n\n**Arguments \u0026 Flags**\n\n| Flag          | Shorthand | Description                                                                                             | Default |\n| ------------- | --------- | ------------------------------------------------------------------------------------------------------- | ------- |\n| `\u003cfile\u003e`      | (Arg)     | The source note file to move (required).                                                                | (none)  |\n| `\u003cdest\u003e`      | (Arg)     | The destination note type or path. Required if not using flags.                                         | (none)  |\n| `--workspace` |           | The name of the target workspace.                                                                       | (current) |\n| `--branch`    |           | The name of the target Git branch.                                                                      | (current) |\n| `--type`      |           | The target note type.                                                                                   | (none)  |\n| `--migrate`   |           | Apply standardization (frontmatter, filename) to the note after moving.                                 | `true`  |\n| `--dry-run`   |           | Preview the move operation without making changes.                                                      | `false` |\n| `--force`     |           | Overwrite the destination file if it already exists.                                                    | `false` |\n| `--copy`      |           | Copy the note instead of moving it, leaving the original file intact.                                   | `false` |\n\n**Examples**\n\n\n---\n\n### `nb migrate`\n\nStandardizes the frontmatter and filenames of existing notes.\n\n**Usage**\n\n\n**Description**\n\nAnalyzes notes and fixes common formatting and metadata issues, which is useful for importing notes from other systems or cleaning up an existing collection. It can fix missing titles, dates, IDs, and tags, and standardize filenames.\n\n**Arguments \u0026 Flags**\n\n| Flag                 | Shorthand | Description                                                        | Default    |\n| -------------------- | --------- | ------------------------------------------------------------------ | ---------- |\n| `[paths...]`         | (Arg)     | Optional list of specific files or directories to migrate.         | (current)  |\n| `--all`              |           | Apply all available fixes.                                         | `false`    |\n| `--fix-titles`       |           | Add missing `title` fields to frontmatter.                         | `false`    |\n| `--fix-dates`        |           | Add missing `created` and `modified` timestamps.                   | `false`    |\n| `--fix-tags`         |           | Add tags based on the note's directory structure.                  | `false`    |\n| `--fix-ids`          |           | Add a unique ID if one is missing.                                 | `false`    |\n| `--fix-filenames`    |           | Rename files to the `YYYYMMDD-title.md` standard.                  | `false`    |\n| `--dry-run`          |           | Preview all changes without modifying any files.                   | `false`    |\n| `--workspace`        |           | Limit the migration to a specific workspace by name.               | (current)  |\n| `--global`           |           | Run the migration on the global workspace only.                    | `false`    |\n| `--all-workspaces`   |           | Run the migration on all registered workspaces.                    | `false`    |\n| `--no-backup`        |           | Do not create backup files.                                        | `false`    |\n| `--preserve-timestamps` |        | Preserve original file modification times.                         | `true`     |\n| `--index-sqlite`     |           | Create or update SQLite entries for the notes.                     | `false`    |\n\n**Example**\n\n\n---\n\n### `nb workspace`\n\nManages workspace registrations.\n\n**Usage**\n\n\n**Description**\n\nA collection of commands to manage how `nb` recognizes and interacts with project directories.\n\n**Subcommands**\n\n-   **`add [path]`**: Registers a directory as a workspace. If `[path]` is omitted, the current directory is used.\n    -   `--name`: Specify a custom name for the workspace.\n    -   `--type`: Set the workspace type (`git-repo`, `directory`, `global`).\n    -   `--notebook`: Set a custom notebook directory for this workspace.\n\n-   **`list`** (alias: `ls`): Displays a table of all registered workspaces, their paths, and last-used timestamps.\n\n-   **`remove \u003cname\u003e`** (alias: `rm`): Removes a workspace registration by its name.\n\n-   **`current`**: Shows detailed information about the currently detected workspace.\n\n-   **`doctor`**: (See `nb doctor` command below).\n\n**Examples**\n\n\n---\n\n### `nb doctor`\n\nChecks for and offers to fix common configuration issues.\n\n**Usage**\n\n\n**Description**\n\nScans the workspace registration database for problems like duplicate entries, invalid paths, or inconsistent path casing and provides an option to fix them automatically.\n\n**Arguments \u0026 Flags**\n\n| Flag    | Shorthand | Description                              | Default |\n| ------- | --------- | ---------------------------------------- | ------- |\n| `--fix` |           | Automatically fix any detected issues.   | `false` |\n\n**Example**\n\n\n---\n\n### `nb context`\n\nDisplays information about the current workspace context.\n\n**Usage**\n\n\n**Description**\n\nProvides details about the detected workspace, active Git branch, and the absolute paths for different note types. This is primarily used for scripting and integration with other tools.\n\n**Arguments \u0026 Flags**\n\n| Flag     | Shorthand | Description                                         | Default |\n| -------- | --------- | --------------------------------------------------- | ------- |\n| `--json` |           | Output the context information in JSON format.      | `false` |\n| `--path` |           | Return only the absolute path for a specific type.  | (none)  |\n\n**Example**\n\n\n---\n\n### `nb init`\n\nInitializes `nb` configuration and registers the current directory as a workspace.\n\n**Usage**\n\n\n**Description**\n\nThis command sets up the necessary global configuration and directories for `nb` (e.g., in `~/.config/nb` and `~/.local/share/nb`). It also registers the current directory as your first workspace.\n\n**Arguments \u0026 Flags**\n\n| Flag        | Shorthand | Description                                                           | Default |\n| ----------- | --------- | --------------------------------------------------------------------- | ------- |\n| `--minimal` |           | Only create the global configuration and directories, do not register the current directory. | `false`   |\n\n**Example**\n\n\n---\n\n### `nb obsidian`\n\nManages Obsidian integration.\n\n**Usage**\n\n\n**Description**\n\nA collection of commands for integrating `nb` with the Obsidian note-taking application.\n\n**Subcommands**\n\n-   **`install-dev`**: Installs the `nb` Obsidian plugin for development purposes by creating a symlink from the plugin source code to an Obsidian vault's plugin directory. This is intended for developers working on the plugin itself.\n    -   `--vault`: Specify the path to the Obsidian vault. Defaults to `~/Documents/nb`.\n\n**Example**\n\n\n---\n\n### `nb version`\n\nPrints the version information for the binary.\n\n**Usage**\n\n\n**Description**\n\nDisplays the version, commit hash, branch, and build date for the `nb` binary.\n\n**Arguments \u0026 Flags**\n\n| Flag     | Shorthand | Description                                 | Default |\n| -------- | --------- | ------------------------------------------- | ------- |\n| `--json` |           | Output the version information in JSON format. | `false`   |\n\n**Example**",
      "code_blocks": [
        "nb new [title] [flags]",
        "nb new \"API design session notes\"\n\nnb new -t learn \"Go Generics\"\n\nnb new -g -t daily --no-edit\n\necho \"This is an important idea.\" | nb new \"A Quick Thought\"",
        "nb quick \"\u003ccontent\u003e\"",
        "nb quick \"Remember to review the new pull request #42.\"",
        "nb list [type] [flags]",
        "nb list\n\nnb list llm\n\nnb list --all\n\nnb list --workspaces --json",
        "nb search \u003cquery\u003e [flags]",
        "nb search \"API authentication\"\n\nnb search \"database\" --all -t learn",
        "nb manage [flags]",
        "nb manage",
        "nb archive [files...] [flags]",
        "nb archive 20250101-old-note.md 20250215-another.md\n\nnb archive --older-than 90",
        "nb move \u003cfile\u003e \u003cdestination\u003e [flags]",
        "nb move my-note.md learn\n\nnb move my-note.md --workspace other-project --branch feature-branch --type current\n\nnb move /path/to/external.md llm --copy",
        "nb migrate [paths...] [flags]",
        "nb migrate --all --dry-run",
        "nb workspace \u003csubcommand\u003e",
        "nb workspace add\n\nnb workspace list\n\nnb workspace remove my-old-project",
        "nb doctor [flags]",
        "nb doctor\n\nnb doctor --fix",
        "nb context [flags]",
        "nb context --path learn",
        "nb init [flags]",
        "cd ~/projects/my-project\nnb init",
        "nb obsidian \u003csubcommand\u003e",
        "nb obsidian install-dev --vault /path/to/my/obsidian/vault",
        "nb version [flags]",
        "nb version --json"
      ]
    },
    "configuration": {
      "title": "Configuration",
      "content": "The `nb` command-line tool is configured through a YAML file, environment variables, or command-line flags.",
      "subsections": [
        {
          "title": "Configuration File",
          "content": "`nb` uses a configuration file located at `$HOME/.config/nb/config.yaml`. The file is created with default values when `nb init` is first run.\n\n**Example `config.yaml`:**",
          "code_blocks": [
            "# Directory where nb stores its data, including the workspace database and search index.\ndata_dir: ~/.local/share/nb\n\n# The editor command to use when creating new notes.\n# Defaults to the value of the $EDITOR environment variable.\neditor: nvim\n\n# The default note type to use for `nb new` if not specified.\ndefault_type: current\n\n# Custom templates for different note types.\ntemplates:\n  meeting: |\n    # {{.Title}}\n    \n    **Date:** {{.Date}}\n    **Workspace:** {{.Workspace}}\n    **Branch:** {{.Branch}}\n    \n    ## Attendees\n    \n    - \n    \n    ## Agenda\n    \n    1. \n    \n    ## Notes\n    \n    - \n    \n    ## Action Items\n    \n    - [ ] "
          ]
        },
        {
          "title": "Configuration Keys",
          "content": "The following keys can be set in `config.yaml`:\n\n-   **`data_dir`**: Specifies the directory for operational data, including the SQLite databases for the workspace registry (`workspaces.db`) and the search index (`index.db`).\n    -   **Default**: `~/.local/share/nb`\n\n-   **`editor`**: The command used to open a text editor for new or existing notes.\n    -   **Default**: The value of the `$EDITOR` environment variable.\n\n-   **`default_type`**: The default note category for the `nb new` command when the `-t` or `--type` flag is not used.\n    -   **Default**: `current`\n\n-   **`templates`**: A map that defines initial content for new notes of a specified type.\n    -   **Variables**: Templates can contain the following variables, which are substituted upon note creation:\n        -   `{{.Title}}`: The title of the note.\n        -   `{{.Date}}`: The current date (e.g., `2025-09-26`).\n        -   `{{.Timestamp}}`: The current timestamp (e.g., `2025-09-26 15:04:05`).\n        -   `{{.Workspace}}`: The name of the current workspace.\n        -   `{{.Branch}}`: The name of the current Git branch."
        },
        {
          "title": "Environment Variables",
          "content": "Settings in `config.yaml` can be overridden by environment variables. The variables must be prefixed with `NB_`, be in uppercase, and use underscores.\n\n-   **`NB_DATA_DIR`**: Overrides the `data_dir` setting.\n-   **`NB_EDITOR`**: Overrides the `editor` setting.\n-   **`NB_DEFAULT_TYPE`**: Overrides the `default_type` setting.\n\n**Example:**",
          "code_blocks": [
            "export NB_EDITOR=\"code --wait\"\nnb new \"My Note\""
          ]
        }
      ]
    },
    "examples": {
      "title": "Examples",
      "content": "This document provides examples for using `grove-notebook` (`nb`), from command-line use to integration with other development tools.\n\n### Example 1: Command-Line Workflow\n\nThis example covers the fundamental commands for creating, finding, and organizing notes.\n\n1.  **Initialize `nb` and Register a Workspace**\n\n    First, run `nb init` to set up global note directories. Then, navigate to a project directory and register it as a workspace.\n\n    ```bash\n    # Run once to set up global directories (e.g., ~/Documents/nb)\n    nb init\n\n    # Navigate to a git repository and register it as a workspace\n    cd ~/projects/my-api\n    nb workspace add .\n    ```\n\n2.  **Create Notes by Type**\n\n    The `-t` flag organizes notes into subdirectories by type. Nested types like `issues/bug` create nested directories.\n\n    ```bash\n    # Create an architecture note\n    nb new \"Initial API Design\" -t architecture\n\n    # Create a note for a bug report\n    nb new \"User login fails with special characters\" -t issues/bug\n\n    # Create a quick, one-line note without opening an editor\n    nb quick \"Remember to review PR #114\"\n    ```\n\n    These commands create files in structured paths, such as `~/Documents/nb/repos/my-api/main/architecture/YYYYMMDD-initial-api-design.md`.\n\n3.  **List and Search Notes**\n\n    The `list` and `search` commands query the note database. The search is powered by SQLite FTS5 for full-text queries.\n\n    ```bash\n    # List all notes in the current workspace and branch\n    nb list --all\n\n    # Search for notes containing \"api\" across ALL workspaces\n    nb search \"api\" --workspaces\n    ```\n\n4.  **Manage Notes in the TUI**\n\n    The `nb manage` command starts a terminal interface for browsing, filtering, and performing bulk actions like archiving.\n\n    ```bash\n    nb manage\n    ```\n\n### Example 2: Neovim Integration\n\nThe `nb.nvim` plugin integrates `grove-notebook` into Neovim.\n\n1.  **Create a New Note**\n\n    Pressing `\u003cleader\u003enn` opens a picker to select a note type. After choosing a type (e.g., \"todos\") and entering a title (\"Refactor User Model\"), `nb` creates the note and opens it in a new buffer.\n\n2.  **Search for Notes**\n\n    Pressing `\u003cleader\u003ens` opens a picker that searches all notes in the current repository. As you type, the list filters and a preview panel shows the content of the selected note.\n\n3.  **Create a Global Note**\n\n    For notes not tied to a specific project, `\u003cleader\u003enng` opens a picker for global note types. Selecting a type (e.g., \"learn\") and entering a title creates a note in the global notebook, which is accessible from any workspace.\n\n### Example 3: Grove Flow Integration\n\n`grove-notebook` can serve as the persistent storage backend for `grove-flow`.\n\n1.  **Configure the Notebook Directory**\n\n    In your global `~/.config/grove/grove.yml`, define a central `notebook_dir`. This tells Grove tools where to store long-term artifacts.\n\n    ```yaml\n    # ~/.config/grove/grove.yml\n    notebook_dir: ~/Documents/nb\n    ```\n\n2.  **Initialize a Flow Plan**\n\n    When inside a project directory, initializing a `flow` plan stores it within the notebook, scoped to the current project and branch.\n\n    ```bash\n    # In your project directory ~/projects/my-api on the 'main' branch\n    flow plan init api-refactor --recipe standard-feature\n    ```\n\n3.  **Locate the Plan in Your Notebook**\n\n    The `api-refactor` plan is stored within the `nb` directory structure, making it a searchable part of the knowledge base.\n\n    ```tree\n    ~/Documents/nb/\n    └── repos/\n        └── my-api/\n            └── main/\n                └── plans/\n                    └── api-refactor/\n                        ├── 01-spec.md\n                        ├── 02-implement.md\n                        └── ...\n    ```\n\n### Example 4: Obsidian Integration\n\nThe `nb` notebook directory can be opened as an Obsidian vault for graphical interaction.\n\n1.  **Open Vault in Obsidian**\n\n    In Obsidian, use the \"Open folder as vault\" option and select your `nb` directory (e.g., `~/Documents/nb`).\n\n2.  **Combined Workflow**\n\n    This setup allows for a workflow that combines the CLI and a graphical interface.\n\n    -   **Capture**: Use `nb quick \"Refactor the auth middleware\"` to capture an idea from the terminal without breaking focus.\n    -   **Organize**: Later, open Obsidian. The new note appears automatically. You can then link it to other notes, add it to a Kanban board, or expand on it.\n\n3.  **Visualization**\n\n    Use Obsidian's graph view to see connections between notes created across different projects and branches."
    },
    "grove-flow-integration": {
      "title": "Grove Flow Integration",
      "content": "`grove-notebook` (`nb`) can be configured to act as a persistent storage backend for `grove-flow`. This configuration centralizes development notes, `grove-flow` plans, and chat sessions into a single directory structure, which allows `nb search` to query artifacts generated by `grove-flow`.\n\nThe integration organizes plans and chats based on the `nb` workspace they are associated with, maintaining a separation of artifacts between different projects.",
      "subsections": [
        {
          "title": "Configuration",
          "content": "The integration is enabled by setting the `plans_directory` and `chat_directory` paths under the `flow` key in your `grove.yml` configuration file.\n\nThe configuration supports a `{{REPO}}` variable that expands to the name of the current repository, which can be used to organize plans and chats by project.\n\n**Example `~/.config/grove/grove.yml` configuration:**\n\n\nThis configuration results in the following directory structure within the notebook:",
          "code_blocks": [
            "flow:\n  # Model configuration for grove-flow operations\n  oneshot_model: gemini-2.5-pro\n  summary_model: claude-3-haiku\n  \n  # Store plans organized by repository and branch\n  # {{REPO}} automatically expands to the current repository name\n  plans_directory: '~/Documents/nb/repos/{{REPO}}/main/plans'\n  \n  # Store active chat sessions in a 'current' directory\n  chat_directory: '~/Documents/nb/repos/{{REPO}}/main/current'\n  \n  # Whether to automatically summarize chats when completed\n  summarize_on_complete: false",
            "~/Documents/nb/\n└── repos/\n    ├── my-project/\n    │   └── main/\n    │       ├── plans/\n    │       │   ├── feature-auth/\n    │       │   │   ├── 01-spec.md\n    │       │   │   └── 02-implement.md\n    │       │   └── refactor-db/\n    │       │       └── ...\n    │       └── current/\n    │           ├── api-design.md\n    │           └── debug-session.md\n    └── another-project/\n        └── main/\n            ├── plans/\n            └── current/"
          ]
        },
        {
          "title": "Working with Plans and Chats",
          "content": "Once configured, `grove-flow` commands store artifacts in the specified notebook directories.\n\n-   **Creating Plans**: `flow plan init my-new-feature` creates the plan directory within the configured `plans_directory`. Jobs added with `flow plan add` are stored there.\n\n-   **Managing Chats**: `flow chat -s my-idea.md` creates the chat file in the configured `chat_directory`.\n\n-   **Searching Artifacts**: `nb search` can query the content of these plan and chat files.\n    ```bash\n    # Find mentions of \"database schema\" in notes, plans, or chats\n    nb search \"database schema\" --all-workspaces\n    ```\n\n-   **Viewing in Other Tools**: All artifacts are stored as Markdown files and can be opened in editors like Obsidian for viewing or editing."
        }
      ]
    },
    "neovim-plugin": {
      "title": "Neovim Plugin",
      "content": "The `nb.nvim` plugin provides functions for managing `grove-notebook` files within Neovim. It uses the `nb` command-line tool to determine the correct workspace, branch, and file paths for note operations.",
      "subsections": [
        {
          "title": "Installation",
          "content": "The plugin is installed from a local clone of the `grove-notebook` repository.\n\n**Using `lazy.nvim`:**",
          "code_blocks": [
            "{\n  -- Path to the local grove-notebook repository\n  dir = \"~/path/to/grove-notebook/nvim-plugin\",\n  dependencies = {\n    'stevearc/oil.nvim', -- Optional, for directory browsing\n  },\n  config = function()\n    require('nb').setup({\n      -- Path to the nb binary if not in shell's PATH\n      nb_command = \"nb\",\n    })\n  end,\n}"
          ]
        },
        {
          "title": "Features",
          "content": "*   **Note Creation**: A picker interface allows creating new notes. The plugin determines the correct storage path based on the current workspace and Git branch context.\n*   **Note Searching**: The plugin provides several pickers for searching notes, each with a live preview:\n    *   Search within the current repository.\n    *   Search global notes, which are not associated with a repository.\n    *   Search all notes across all registered workspaces.\n    *   Search all notes from all branches within the current repository.\n*   **Note Management**: Notes can be archived from any search picker, with support for selecting multiple notes."
        },
        {
          "title": "Commands and Keybindings",
          "content": "The plugin provides Vim commands and a set of default key mappings.\n\n### Default Keybindings\n\n| Keybinding | Action |\n| --- | --- |\n| `\u003cleader\u003enn` | Opens a picker to select a note type and create a new note. |\n| `\u003cleader\u003ens` | Searches for notes in the current repository. |\n| `\u003cleader\u003eng` | Searches for global notes. |\n| `\u003cleader\u003ena` | Searches for all notes across all workspaces. |\n| `\u003cleader\u003enb` | Searches for all notes from all branches in the current repository. |\n| `\u003cleader\u003enr` | Archives the current note or notes older than 30 days. |\n| `\u003cleader\u003eni` | Opens the directory for `current` notes. |\n| `\u003cleader\u003enc` | Opens the directory for `llm` (chat) notes. |\n| `\u003cleader\u003enl` | Opens the directory for `learn` notes. |\n\n### Vim Commands\n\n| Command | Description |\n| --- | --- |\n| `:NbNew [title]` | Creates a new note. |\n| `:NbQuick \"content\"` | Creates a quick, one-line note. |\n| `:NbList [type]` | Lists notes of a specific type in the quickfix window. |\n| `:NbSearch \u003cquery\u003e` | Searches notes and populates the quickfix window. |\n| `:NbArchive [file]` | Archives the specified note or the current note. |\n| `:NbContext` | Displays the current workspace context. |"
        },
        {
          "title": "Grove Flow Integration",
          "content": "`grove-notebook` can be configured as the storage location for `grove-flow` plans and chats. The `nb.nvim` plugin creates files that can then be used by `grove-flow`.\n\n### Managing Plans and Chats\n\n*   **Start a New Chat**: Running the create note command (`\u003cleader\u003enn`) and selecting the `llm` note type creates a new Markdown file. This file is formatted as a `grove-flow` chat job and can be executed from the terminal with `flow chat run`.\n*   **Browse Existing Plans**: The search pickers (`\u003cleader\u003ens`, `\u003cleader\u003ena`) can find and open `grove-flow` plan and chat files stored within the notebook directory. The live preview shows job prompts and outputs."
        },
        {
          "title": "Configuration Example",
          "content": "The plugin's mappings and the path to the `nb` binary can be set in the `setup` function.",
          "code_blocks": [
            "require('nb').setup({\n  -- Use a custom path if the 'nb' binary is not in the shell's PATH\n  nb_command = vim.fn.expand(\"~/path/to/grove-notebook/bin/nb\"),\n  mappings = {\n    current = '\u003cleader\u003eni',       -- Open current notes\n    llm = '\u003cleader\u003enc',           -- Open LLM (chat) notes\n    learn = '\u003cleader\u003enl',         -- Open learning notes\n    new = '\u003cleader\u003enn',           -- Create a new note with a picker\n    path = '\u003cleader\u003ecp',          -- Copy the current file path\n    search = '\u003cleader\u003ens',        -- Search notes in the current repository\n    search_global = '\u003cleader\u003eng', -- Search global notes\n    search_all = '\u003cleader\u003ena',    -- Search all notes across all workspaces\n    search_repo = '\u003cleader\u003enb',   -- Search all notes in the current repository\n    archive = '\u003cleader\u003enr',       -- Archive notes\n    -- Disable a mapping by setting it to false\n    move = false,\n  },\n})"
          ]
        }
      ]
    },
    "obsidian-integration": {
      "title": "Obsidian Integration",
      "content": "`grove-notebook` stores notes as Markdown files in a standard directory structure, which is compatible with GUI-based editors like Obsidian. Using both tools allows for command-line note creation and graphical organization.",
      "subsections": [
        {
          "title": "Using the Notebook Directory as an Obsidian Vault",
          "content": "The `nb` notebook directory can be opened as an Obsidian vault. By default, this directory is `~/Documents/nb`.\n\n-   **File System Synchronization**: Notes created via the `nb` command line are detected by Obsidian's file watcher. Notes created or modified in Obsidian are indexed and available to `nb search`.\n-   **Visualization**: Obsidian's graph view can be used to visualize links between notes from different projects and branches."
        },
        {
          "title": "Common Workflow",
          "content": "This workflow separates note creation from organization. The CLI is used for capture during development tasks, and Obsidian is used for subsequent review and linking.\n\n1.  **Capture via CLI**: During a coding task, a note is created from the terminal.\n    ```bash\n    nb quick \"Refactor the authentication middleware to use a new strategy.\"\n    ```\n\n2.  **Organize in Obsidian**: Later, the `nb` vault is opened in Obsidian. The new note is present and can be:\n    -   Linked to other notes, such as an architecture document.\n    -   Managed on a Kanban board via an Obsidian plugin.\n    -   Refined using Obsidian's editor.\n    -   Queried using plugins like Dataview."
        },
        {
          "title": "Obsidian Plugin",
          "content": "An experimental Obsidian plugin is available in the `grove-notebook` source repository. It adds a sidebar view to browse `nb` workspaces and notes.\n\nThe plugin is intended for development and testing. It is not in the Obsidian community plugin store and must be installed from source.\n\n### Installation\n\n1.  **Clone the Repository**:\n    ```bash\n    git clone https://github.com/mattsolo1/grove-notebook.git\n    ```\n\n2.  **Symlink the Plugin**: Create a symbolic link from the `obsidian-plugin` directory to your Obsidian vault's plugin directory.\n    ```bash\n    # Example command\n    ln -s /path/to/grove-notebook/obsidian-plugin /path/to/your/vault/.obsidian/plugins/nb-integration\n    ```\n\n3.  **Build the Plugin**:\n    ```bash\n    cd /path/to/grove-notebook/obsidian-plugin\n    npm install\n    npm run dev\n    ```\n\n4.  **Enable in Obsidian**: Open Obsidian, go to `Settings` \u003e `Community Plugins`, refresh the list, and enable the \"NB Integration\" plugin."
        }
      ]
    },
    "overview": {
      "title": "Overview",
      "content": "\u003cimg src=\"./images/grove-notebook-inkscape.svg\" width=\"60%\" /\u003e\n\n`grove-notebook` (`nb`) is a command-line note-taking system that organizes notes in Markdown files based on project workspaces and Git branches.\n\n\u003c!-- placeholder for animated gif --\u003e",
      "subsections": [
        {
          "title": "Central Knowledge Base",
          "content": "The main notebook directory (default: `~/Documents/nb`) is intended to be stored outside of any specific Git repository. This design allows notes to persist across different projects, creating a central knowledge base that is not tied to a single repository's lifecycle."
        },
        {
          "title": "Key Features",
          "content": "*   **Note Organization**: Notes are stored as Markdown files.\n*   **Search**: Provides full-text search capabilities using a SQLite FTS5 index.\n*   **`grove-flow` Storage**: Can be configured as a storage location for `grove-flow` plans and chat sessions.\n*   **Editor Integration**: Includes a Neovim plugin for creating and searching notes.\n*   **Obsidian Compatibility**: The notebook directory can be opened as an Obsidian vault.\n*   **CLI**: A command-line interface for creating and managing notes."
        },
        {
          "title": "How It Works",
          "content": "`nb` uses a SQLite database (`workspaces.db`) in its data directory (`~/.local/share/nb`) to register project directories as workspaces. When a command is run, `nb` detects the current workspace by traversing up from the current directory to find a registered path.\n\nNotes are stored in a hierarchical directory structure, typically `NOTEBOOK_DIR/TYPE/WORKSPACE_NAME/BRANCH_NAME/NOTE_TYPE/`. For example, a note of type `current` for the `main` branch of the `my-api` repository would be stored in `~/Documents/nb/repos/my-api/main/current/`. A SQLite database (`index.db`) is used to index notes for search."
        },
        {
          "title": "Ecosystem Integration",
          "content": "`grove-notebook` can function as a storage backend for other tools in the Grove ecosystem.\n\n*   **`grove-flow`**: The `plans_directory` and `chat_directory` in `grove-flow`'s configuration can be set to paths within the `nb` directory structure. This stores all `flow` plans and chat logs in the central notebook.\n*   **Neovim Plugin**: The `nb.nvim` plugin provides commands to create notes and execute searches from within the editor. It can also be used to create files that are then used by `grove-flow` commands."
        },
        {
          "title": "Installation",
          "content": "Install via the Grove meta-CLI:\n\nVerify installation:\n\nRequires the `grove` meta-CLI. See the [Grove Installation Guide](https://github.com/mattsolo1/grove-meta/blob/main/docs/02-installation.md) if you don't have it installed.",
          "code_blocks": [
            "grove install nb",
            "nb version"
          ]
        }
      ]
    }
  }
}