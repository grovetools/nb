# Grove Flow Integration

`grove-notebook` (`nb`) can be configured to act as a persistent storage backend for `grove-flow`. This configuration centralizes development notes, `grove-flow` plans, and chat sessions into a single directory structure, which allows `nb search` to query artifacts generated by `grove-flow`.

The integration organizes plans and chats based on the `nb` workspace they are associated with, maintaining a separation of artifacts between different projects.

## Configuration

The integration is enabled by setting the `plans_directory` and `chat_directory` paths under the `flow` key in your `grove.yml` configuration file.

The configuration supports a `{{REPO}}` variable that expands to the name of the current repository, which can be used to organize plans and chats by project.

**Example `~/.config/grove/grove.yml` configuration:**

```yaml
flow:
  # Model configuration for grove-flow operations
  oneshot_model: gemini-2.5-pro
  summary_model: claude-3-haiku
  
  # Store plans organized by repository and branch
  # {{REPO}} automatically expands to the current repository name
  plans_directory: '~/Documents/nb/repos/{{REPO}}/main/plans'
  
  # Store active chat sessions in a 'current' directory
  chat_directory: '~/Documents/nb/repos/{{REPO}}/main/current'
  
  # Whether to automatically summarize chats when completed
  summarize_on_complete: false
```

This configuration results in the following directory structure within the notebook:

```
~/Documents/nb/
└── repos/
    ├── my-project/
    │   └── main/
    │       ├── plans/
    │       │   ├── feature-auth/
    │       │   │   ├── 01-spec.md
    │       │   │   └── 02-implement.md
    │       │   └── refactor-db/
    │       │       └── ...
    │       └── current/
    │           ├── api-design.md
    │           └── debug-session.md
    └── another-project/
        └── main/
            ├── plans/
            └── current/
```

## Working with Plans and Chats

Once configured, `grove-flow` commands store artifacts in the specified notebook directories.

-   **Creating Plans**: `flow plan init my-new-feature` creates the plan directory within the configured `plans_directory`. Jobs added with `flow plan add` are stored there.

-   **Managing Chats**: `flow chat -s my-idea.md` creates the chat file in the configured `chat_directory`.

-   **Searching Artifacts**: `nb search` can query the content of these plan and chat files.
    ```bash
    # Find mentions of "database schema" in notes, plans, or chats
    nb search "database schema" --all-workspaces
    ```

-   **Viewing in Other Tools**: All artifacts are stored as Markdown files and can be opened in editors like Obsidian for viewing or editing.